<h1>Authoring CodeRunner Questions</h1>

<p>Author: Richard Lobb, University of Canterbury, New Zealand.
        20 December 2016.</p>

<p>This document describes how to write quiz questions using the <a href="http://www.coderunner.org.nz">CodeRunner
plug-in</a> for Moodle. It begins with a QuickStart
guide for first-time users. The rest of the document is a series of sections
building from writing simple questions using the built-in question types
through to authoring of your own question types to handle your own
languages and/or course-specific requirements. The document is targetted
primarily at teachers of programming, although CodeRunner can also be used
in other contexts in which a computer program has to be run in order to grade a student's
textual answer.</p>

<p><em>This is a work-in-progress. Stay tuned for updates.</em></p>

<h1>A quick-start guide to authoring coderunner questions.</h1>

<p>This section shows a first-time user how to write a trivial Python3 function. It
assumes that the CodeRunner plugin has already been installed, that
the reader has a basic knowledge of Moodle and that they can log in as a teacher
in a course.</p>

<p>Carry out the following steps:</p>

<ol>
<li><p>Log yourself into a course on Moodle.</p></li>
<li><p>Select <em>Question bank</em> from the Course administration menu.</p></li>
<li><p>In the main page, click the <em>Create a new question...</em> button.</p></li>
<li><p>Select the <em>CodeRunner</em> radiobutton</p></li>
<li><p>Click <em>Add</em>.</p></li>
<li><p>Fill in the following fields in the question authoring form, leaving all
other fields in their initial state (empty, checked or whatever). Fields are
specified in top-to-bottom order, skipping irrelevant ones.</p>

<ul>
<li>In the <em>CodeRunner question type</em> panel, dropdown, select <em>python3</em> as the
question type, set the Answer Box <em>Rows</em> field to 6 and <em>Columns</em> to 60.</li>
</ul>

<p><img src="http://coderunner.org.nz/pluginfile.php/56/mod_page/content/26/Selection_139.png" width="700"/></p>

<ul>
<li>In the <em>General</em> Panel, set the <em>Question name</em> to <em>Python sqr function</em> and
set the <em>Question text</em> to "Write a function <em>sqr(n)</em> that returns
the square of its parameter <em>n</em>"</li>
</ul>

<p><img src="http://coderunner.org.nz/pluginfile.php/56/mod_page/content/26/The%20General%20section%20of%20the%20question%20authoring%20form.png" width="700"/></p>

<ul>
<li><p>In the <em>Test cases</em> section, set the first test case to:</p>

<ul>
<li>Test case 1: <code>print(sqr(-3))</code></li>
<li>Expected output: <code>9</code></li>
<li>Use as example: checked</li>
</ul></li>
</ul>

<p><img src="http://coderunner.org.nz/pluginfile.php/56/mod_page/content/26/Selection_142.png" width="700"/></p>

<ul>
<li><p>In the <em>Test cases</em> section, set the second test case to:</p>

<ul>
<li>Test case 2: <code>print(sqr(11))</code></li>
<li>Expected output: <code>121</code></li>
<li>Use as example: checked</li>
</ul></li>
<li><p>In the <em>Test cases</em> section, set the third test case to:</p>

<ul>
<li>Test case 3: <code>print(sqr(-4))</code></li>
<li>Expected output: <code>16</code></li>
<li>Use as example: leave unchecked</li>
</ul></li>
<li><p>In the <em>Test cases</em> section, set the fourth test case to:</p>

<ul>
<li>Test case 4: <code>print(sqr(0))</code></li>
<li>Expected output: <code>0</code></li>
<li>Use as example: leave unchecked</li>
</ul></li>
</ul></li>
<li><p>Click <em>Save changes</em>. The new question should now be showing in your question
bank highlighted in green.</p></li>
<li><p>Click the new question's <em>Preview</em> button</p></li>
<li><p>Fill in the answer box with</p>

<pre><code>def sqr(n):
    return n * n
</code></pre></li>
<li><p>Click <em>Check</em></p></li>
</ol>

<p>You should now be looking at a page like the following:
<img src="http://coderunner.org.nz/pluginfile.php/56/mod_page/content/26/256c94b89a769060b65955759c2a8a3ed518557e.png" width="700"/></p>

<p>Congratulations. You just wrote your first CodeRunner question.</p>

<h2>Other things to try:</h2>

<ol>
<li><p>Try submitting various wrong answers and observe what happens.</p></li>
<li><p>Go back to the question editing form and set the last test case to <em>Hidden</em>.
Save and resubmit your answer. Observe that the last test case is now shaded
green (or red, if your answer is wrong), indicating that this is a hidden
test case visible only to staff. Students will not see this line of the table.</p></li>
<li><p>Back in the question bank, click the question's <em>Edit</em> icon.
In the authoring form, insert a wrong answer into the <em>Answer</em> box.
Click <em>Save</em> - observe that the question
is <em>not</em> saved because the question no longer validates. Scroll to inspect
the error message just above the question answer. Fix the error in the answer,
and click <em>Save</em> again. It should work this time.</p></li>
<li><p>Set the <em>Precheck</em> dropdown towards the top of the
authoring form to <em>Examples</em>. Save the question. Then Preview it again,
as before. Observe the
appearance of a <em>Precheck</em> button. Enter a wrong answer and click <em>Precheck</em>.
Note that the code is tested only with the tests for which 'Use as example'
was checked. Fix your code, click <em>Precheck</em> again, then lastly <em>Check</em>.
Note that no penalties were charged for prechecking.</p></li>
</ol>
